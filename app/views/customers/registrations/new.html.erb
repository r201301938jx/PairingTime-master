<% provide(:title, "新規会員登録") %>

<div class="col-12 col-xs-12 col-sm-offset-1 col-sm-10 col-sm-offset-1">

  <h2 class="heading text-center">新規会員登録</h2>

  <%= form_for(resource, as: resource_name, url: registration_path(resource_name)) do |f| %>
  <%= render "customers/shared/error_messages", resource: resource %>

  <div class="col-12 col-xs-12 col-sm-4">
    <div class="form-group row ol-12 col-xs-12 col-sm-12 text-center">
      <%= f.label :"プロフィール画像" %><br>
      <%= attachment_image_tag @customer, :profile_image, fallback: "no_customer_image.jpg", class: "profile-image circle"  %>
      <%= f.attachment_field :profile_image %>
    </div>
  </div>

  <div class="col-12 col-xs-12 col-sm-8">
    <div class="form-group row">
      <%= f.label :"氏名", class: "col-4 col-xs-4 col-sm-4" %>
      <div class="col-4 col-xs-4 col-sm-4">
        <%= f.text_field :last_name, autofocus: true, placeholder: "鈴木", class: "form-control" %>
      </div>
      <div class="col-4 col-xs-4 col-sm-4">
        <%= f.text_field :first_name, autofocus: true, placeholder: "一郎", class: "form-control" %>
      </div>
    </div>

    <div class="form-group row">
      <%= f.label :"フリガナ", class: "col-4 col-xs-4 col-sm-4 " %>
      <div class="col-4 col-xs-4 col-sm-4">
        <%= f.text_field :last_name_kana, autofocus: true, placeholder: "スズキ", class: "form-control" %>
      </div>
      <div class="col-4 col-xs-4 col-sm-4">
        <%= f.text_field :first_name_kana, autofocus: true, placeholder: "イチロー", class: "form-control" %>
      </div>
    </div>

    <div class="form-group row">
      <%= f.label :"電話番号", class: "col-4 col-xs-4 col-sm-4" %>
      <div class="col-8 col-xs-8 col-sm-8">
        <%= f.text_field :"phone_number", autofocus: true, placeholder: "09011112222", class: "form-control" %>
      </div>
    </div>

    <div class="form-group row">
      <%= f.label :"メールアドレス", class: "col-4 col-xs-4 col-sm-4" %>
      <div class="col-8 col-xs-8 col-sm-8">
        <%= f.email_field :email, autofocus: true, autocomplete: "email", placeholder: "xxxxxxxx@xxxx.com", class: "form-control" %>
      </div>
    </div>

    <div class="form-group row">
      <%= f.label :"ニックネーム", class: "col-4 col-xs-4 col-sm-4" %>
      <div class="col-sm-8 col-8 col-xs-8">
        <%= f.text_field :nickname, autofocus: true, placeholder: "イチロー", class: "form-control" %>
      </div>
    </div>

    <div class="form-group row">
      <%= f.label :"パスワード", class: "col-4 col-xs-4 col-sm-4" %>
      <div class="col-8 col-xs-8 col-sm-8">
        <%= f.password_field :password, autocomplete: "new-password", placeholder: "6文字以上で入力してください", class: "form-control" %>
      </div>
    </div>

    <div class="form-group row">
      <%= f.label :"パスワード確認", class: "col-4 col-xs-4 col-sm-4" %>
      <div class="col-8 col-xs-8 col-sm-8">
        <%= f.password_field :password_confirmation, autocomplete: "new-password", placeholder: "同じパスワードを入力してください", class: "form-control" %>
      </div>
    </div>
  </div>

  <div class="actions">
    <%= f.submit "新規登録", class: "btn btn-brown btn-block" %>
  </div>

  <% end %>

  <div>
    <div class="col-12 col-xs-12 col-sm-4">
      <%= link_to customer_facebook_omniauth_authorize_path, class: "btn btn-facebook btn-block" do %>
      <i class="fab fa-facebook"></i> Facebookアカウントでログイン
      <% end %>
    </div>
    <div class="col-12 col-xs-12 col-sm-4">
      <%= link_to customer_google_oauth2_omniauth_authorize_path, class: "btn btn-danger btn-block" do %>
      <i class="fab fa-google"></i> Googleアカウントでログイン
      <% end %>
    </div>
    <div class="col-12 col-xs-12 col-sm-4">
      <%= link_to customer_twitter_omniauth_authorize_path, class: "btn btn-twitter btn-block" do %>
      <i class="fab fa-twitter"></i> Twitterアカウントでログイン
      <% end %>
    </div>
  </div>

</div>

<!-- 画像プレビュー機能 -->
<script>
  $(function(){
    $('#customer_profile_image').on('change', function (e) {
      var reader = new FileReader();
      reader.onload = function (e) {
        $(".profile_image").attr('src', e.target.result);
      }
      reader.readAsDataURL(e.target.files[0]); 
    });
  });
</script>